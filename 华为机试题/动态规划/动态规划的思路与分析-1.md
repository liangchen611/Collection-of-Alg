## 动态规划类问题的分析

### 如何判断问题属于动态规划（DP）问题？

可以试问3个问题：

1.**这个问题能不能被分成更小的问题？然后用它们的结果去推导更大的问题的答案？**

【第1天到第n天股票的最大利润，可以通过前n-1天的利润来推导吗？】

【从左上角到右下角的最短路径，是否能从“上面来的”和“左边来的”路径中进行选择？】

---
2.**会不会计算“重复的东西”？**

【斐波那契数列中，需要多次计算的fib(2)，fib(3)等等】

---
3.**是否能写出“状态”和“状态转移”？**

【能不能新增一个变量dp[i]来表示“第i步的最优解”？】

【背包问题中：dp[i][j]可以表示第i步中放入容量为j的背包中物品的最大价值】

【最长公共子序列中：dp[i][j]可以表示序列A的前i个元素和序列B的前j个元素的最大公共子序列长度】】

---
## **DP问题一般会满足3个核心特征：**

***1. 最优子结构（Optimal Substructure）***

【当前问题的最优解可以通过其子问题的最优解推导所得】。

例如：
```
d[i] = max(d[i-1], d[i-2])
```

***2. 重叠子问题（Overlapping Subproblems）***

【同一个子问题在不同路径中会反复求解】。

例如：斐波那契数列的fib[2]在多个计算路径下都会被调用并计算，该问题往往是**导致DP问题计算开销大**的原因之一。

***3. 有限的状态空间（Bounded State Space）***

问题可以被转化为有限的状态集合，如 dp[i]、dp[i][j]，而不会无限递归

---

### DP问题的一般分析思路？


### 第一步：定义状态DP
明确要“记住”的是什么东西。

dp[i]：表示前 i 项的最优解/最大值/最小成本

dp[i][j]：表示区间 [i,j] 的最优解,或是【条件1为i，条件2为j情况下的最优解】

### 第二步：分析状态转移方程

也叫做“递推关系”，需要根据题目中的条件来确定状态转移的方程

### 第三步：对问题的初始状态进行定义和初始化

例如，对dp[0]，dp[1]等边界处进行预先定义，这非常重要，因为状态转移方程的计算过程需要前一状态的值，
因此初始状态必须可确定才能进行进一步的运算。

### 第四步：确定遍历的顺序（循环和递归依照什么顺序来进行）

本质确保一个事情：在引用状态转移方程时，它所依赖的前一个状态已经被计算完成，
否则会出现值空缺的情况导致出错。

---
|结构|遍历方式|例子
|----|-----|
|线性结构|从前向后对i进行遍历|斐波那契数列、走楼梯|
|二维结构|建立i，j的两层嵌套循环|最长公共子序列|
|区间依赖|以长度length为第一层循环，内部用i为标准进行第二层循环|最长对称子串|
|倒序问题|从后向前的遍历顺序|背包问题

## DP问题不一定需要递归，例如斐波那契数列就不需要递归调用

---
# 一些DP问题的基本分析

|题目|DP状态的定义|状态的转移
|----|-----|
|斐波那契数列|dp[i] 为第 i 项|dp[i] = dp[i-1] + dp[i-2]|
|爬楼梯|dp[i] 为到第 i 阶方法数|同上|
|最长公共子序列 LCS|dp[i][j] 为 A[0:i],B[0:j]的最长公共子序列|dp[i][j]=dp[i-1][j-1]+1|